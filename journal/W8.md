[← Tillbaka](../README.md)

# Vecka 8 (v.9)
 
Veckan började med att jag fortsatte med yield uträkningarna i Kraftwerk. Det var ganska komplicerat att få till det då det fanns flera krav utöver siffrorna jag skulle räkna ut. Pipelinen behövde klara av att göra uträkningarna på stora mängder dokument samtidigt som den behövde vara väldigt snabb eftersom det kommer sitta en användare i andra änden och vänta på resultatet. Efter många om och men hade jag lyckats skapa en pipeline som räknade ut 95% av all data som jag var ute efter och den var relativt snabb. Men dessa sista 5% var väldigt viktiga att få med och på grund av hur pipelinen såg ut fanns det tyvärr ingen uppdatering jag kunde göra utan att fundamentalt ändra pipelinen. Så för att lösa de sista 5% behövde jag också lösa de första 95 på ett nytt sätt. Efter en stunds jobb lyckades jag att räkna ut all data! Men då visade det sig istället att inte klarade av lika stora dataset längre, alltså mängden dokument den kunde hantera samtidigt hade sjunkit drastiskt. Min nya lösning visade sig inte vara lika lätt viktig som den tidigare och krävde därför extrema mängder minne för att kunna köra, i vissa fall mer än vad MongoDB kunde erbjuda… så det var bara för mig att gå tillbaka till ritbordet och försöka komma på en ny lösning. 

Jag började diskutera med en kollega hur vi skulle kunna gå tillväga för att lösa alla uträkningar utan att överbelasta databasen. Till slut kom vi fram till att begränsa uträkningarna lite grann genom att dela upp det. Tidigare räknade jag ut yield för en specifik produkts alla resultat grupper och de individuella resultaten i varje grupp, detta är förstås väldigt mycket data så därför ändrade vi till att bara räkna på resultat grupperna. Om man vill ha datan för de individuella testerna i resultat grupperna måste man nu specificera en resultat grupp att göra uträkningarna på.
